<html>
<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.5/p5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.5/addons/p5.dom.js"></script>
	<script src="../lib/p5.speech.js"></script>
	<script>

	var myRec = new p5.SpeechRec('en-US', parseResult); // new P5.SpeechRec object
	myRec.continuous = true; // do continuous recognition
	myRec.interimResults = true; // allow partial recognition (faster, less accurate)
	

	function setup()
	{
		// graphics stuff:
		createCanvas(800, 600);
		background(255, 255, 255);
		
		fill(0,0,0);


		// instructions:
		textSize(20);
		textAlign(LEFT);
		text("What's your favourite color?", 20, 20);

		//myRec.onResult = parseResult; // now in the constructor
		myRec.start(); // start engine
	}

	function draw()
	{
		ellipse(400, 300, 200, 200);
		
		

	}

	function parseResult()
	{
		// recognition system will often append words into phrases.
		// so hack here is to only use the last word:
		var mostrecentword = myRec.resultString.split(' ').pop();
		if(mostrecentword.indexOf("yellow")!==-1) { fill(255,215,0); }
		else if(mostrecentword.indexOf("red")!==-1) { fill(220,20,60); }
		else if(mostrecentword.indexOf("pink")!==-1) { fill(255,192,203); }
		else if(mostrecentword.indexOf("purple")!==-1) { fill(139,0,255); }
		else if(mostrecentword.indexOf("blue")!==-1) { fill(0,191,255); }
		else if(mostrecentword.indexOf("white")!==-1) { fill(255,255,255); }
		else if(mostrecentword.indexOf("black")!==-1) { fill(0,0,0); }
		else if(mostrecentword.indexOf("green")!==-1) { fill(34,195,46); }
		else if(mostrecentword.indexOf("grey")!==-1) { fill(220,220,220); }
		else if(mostrecentword.indexOf("orange")!==-1) { fill(242,133,0); }
		console.log(mostrecentword);
	}

</script>
</head>
<body>
</body>
</html>
